# -*- coding: utf-8 -*-
"""logreg_prediction.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1ZtC9LrGdoa8zJbpMdnpyoBhIEdpmAjzu
"""

import pandas as pd
import numpy as np
import sklearn
import plotly
from sklearn.model_selection import train_test_split
import statsmodels.api as sm 
from sklearn.svm import SVC
from sklearn.metrics import confusion_matrix
from sklearn.model_selection import cross_val_score
from numpy import mean
from numpy import std
from sklearn.model_selection import RepeatedKFold
from sklearn.model_selection import cross_val_score
from numpy import mean
from numpy import std
from sklearn.model_selection import RepeatedKFold
from sklearn.linear_model import LogisticRegression
from sklearn.ensemble import RandomForestClassifier
from sklearn import metrics
import matplotlib.pyplot as plt

df = pd.read_csv("FinalTestData_1.csv")

dfTraining = df.iloc[:2770,:]
df2018 = df.iloc[2770:,:]

dfTraining.tail()

y = dfTraining['Winner']
cols = ['WPT','HWPT','AWPT','APPG']
X = dfTraining[cols]

logit_model=sm.Logit(y,X)
result=logit_model.fit()

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.8, random_state =5)
print(X_train.shape, X_test.shape, y_train.shape, y_test.shape)

from sklearn.model_selection import cross_val_score
from numpy import mean
from numpy import std
from sklearn.model_selection import RepeatedKFold


logreg = LogisticRegression()
logreg.fit(X_train , y_train)
y_pred = logreg.predict(X_test)
print('Accuracy of logistic regression classifier: {:.2f}'.format(logreg.score(X_test , y_test)))


cv = RepeatedKFold(n_splits=10, n_repeats=3, random_state=1)
scores1 = cross_val_score(logreg, X_test, y_test, cv=cv, n_jobs=-1)
print('Score: %f (%f)' % (mean(scores1), std(scores1)))

cf_matrix = confusion_matrix(y_test, y_pred)

print(cf_matrix)



from sklearn.metrics import roc_curve
from sklearn.metrics import roc_auc_score
from matplotlib import pyplot


y_pred_proba = logreg.predict_proba(X_test)[::,1]
fpr, tpr, _ = metrics.roc_curve(y_test,  y_pred_proba)
auc = metrics.roc_auc_score(y_test, y_pred_proba)


ns_probs = [0 for _ in range(len(y_test))]
ns_auc = roc_auc_score(y_test, ns_probs)
ns_fpr, ns_tpr, _ = roc_curve(y_test, ns_probs)
pyplot.plot(ns_fpr, ns_tpr, linestyle='--', label='No Skill='+str(ns_auc))


plt.plot(fpr,tpr,label="AUC="+str(auc))
plt.ylabel('True Positive Rate')
plt.xlabel('False Positive Rate')
plt.legend(loc=4)
plt.show()

df18 = pd.read_csv("2018.csv")

def match(df2018, team1, team2, model,random_scale=5):
    
    match = pd.DataFrame(columns=['WP1','HWP','AWP','APPG1','WP2','HWP2','AWP2','APPG2'], index=[0])
    
    WP1 = match['WP1'] = df18[df18.Home_Team == team1]['WP1'].iloc[0]
    HWP = match['HWP'] = df18[df18.Home_Team == team1]['HWP'].iloc[0]
    AWP = match['AWP'] = df18[df18.Home_Team == team1]['AWP'].iloc[0]
    APPG1 = match['APPG1'] = df18[df18.Home_Team == team1]['APPG1'].iloc[0]

    match['WP1'] = np.random.normal(WP1, scale=random_scale)
    match['HWP'] = np.random.normal(HWP, scale=random_scale)
    match['AWP'] = np.random.normal(AWP, scale=random_scale)
    match['APPG1'] = np.random.normal(APPG1, scale=random_scale)

    WP2 = match['WP2'] = df18[df18.Away_Team == team2]['WP2'].iloc[0]
    HWP2 = match['HWP2'] = df18[df18.Away_Team == team2]['HWP2'].iloc[0]
    AWP2 = match['AWP2'] = df18[df18.Away_Team == team2]['AWP2'].iloc[0]
    APPG2 = match['APPG2'] = df18[df18.Away_Team == team2]['APPG2'].iloc[0]

    match['WP2'] = np.random.normal(WP2, scale=random_scale)
    match['HWP2'] = np.random.normal(HWP2, scale=random_scale)
    match['AWP2'] = np.random.normal(AWP2, scale=random_scale)
    match['APPG2'] = np.random.normal(APPG2, scale=random_scale)
    
    match['WPT'] = match['WP1'] - match['WP2']
    match['HWPT'] = match['HWP'] - match['HWP2']
    match['AWPT'] = match['AWP'] - match['AWP2']
    match['APPG'] = match['APPG1'] - match['APPG2']
    
    match = match[['WPT', 'HWPT', 'AWPT', 'APPG']]

    
    match_array = match.values
    
    prediction = model.predict(match_array)
    
    winner = None
    
    if prediction == 0:
        winner = team1
    elif prediction == 1:
        winner = team2
    
    return winner

match(df2018, 'Wasps', 'Saracens', logreg)

def simulate_matchessvc(team1, team2, n_matches=1000):
    
    match_results = []
    for i in range(n_matches):
        match_results.append(match(df2018, team1, team2, logreg, random_scale=3))
        
    team1_prob = match_results.count(team1)/len(match_results)*100
    team2_prob = match_results.count(team2)/len(match_results)*100
    
    print(team1, str(round(team1_prob, 2)) + '%')
    print(team2, str(round(team2_prob,2)) + '%')
    print('-------------------------')
    print()
    
    if team1_prob > team2_prob:
        overall_winner = team1
    else:
        overall_winner = team2
    
    return {'team1': team1,
            'team2': team2,
            'team1_prob': team1_prob, 
            'team2_prob': team2_prob, 
            'overall_winner': overall_winner,
            'match_results': match_results}

simulation_test = simulate_matchessvc('Wasps', 'Saracens', n_matches=100)

"""Round 1"""

win_points = []
Game1 = simulate_matchessvc('Bristol Bears', 'Bath Rugby', n_matches=1000)
print("Game 1 Winner: " + Game1['overall_winner'])
winner = Game1['overall_winner']
win_points.append(winner)


Game2 = simulate_matchessvc('Gloucester Rugby', 'Northampton Saints', n_matches=1000)
print("Game 2 Winner: " + Game2['overall_winner'])
winner = Game2['overall_winner']
win_points.append(winner)

Game3 = simulate_matchessvc('Harlequins', 'Sale Sharks', n_matches=1000)
print("Game 3 Winner: " + Game3['overall_winner'])
winner = Game3['overall_winner']
win_points.append(winner)

Game4 = simulate_matchessvc('Worcester Warriors', 'Wasps', n_matches=1000)
print("Game 4 Winner: " + Game4['overall_winner'])
winner = Game4['overall_winner']
win_points.append(winner)

Game5 = simulate_matchessvc('Exeter Chiefs', 'Leicester Tigers', n_matches=1000)
print("Game 5 Winner: " + Game5['overall_winner'])
winner = Game5['overall_winner']
win_points.append(winner)

Game6 = simulate_matchessvc('Newcastle Falcons', 'Saracens', n_matches=1000)
print("Game 6 Winner: " + Game6['overall_winner'])
winner = Game6['overall_winner']
win_points.append(winner)

"""Round2"""

Game7 = simulate_matchessvc('Northampton Saints', 'Harlequins', n_matches=1000)
print("Game 7 Winner: " + Game7['overall_winner'])
winner = Game7['overall_winner']
win_points.append(winner)

Game8 = simulate_matchessvc('Wasps', 'Exeter Chiefs', n_matches=1000)
print("Game 8 Winner: " + Game8['overall_winner'])
winner = Game8['overall_winner']
win_points.append(winner)


Game9 = simulate_matchessvc('Leicester Tigers', 'Newcastle Falcons', n_matches=1000)
print("Game 9 Winner: " + Game9['overall_winner'])
winner = Game9['overall_winner']
win_points.append(winner)

Game10 = simulate_matchessvc('Saracens', 'Bristol Bears', n_matches=1000)
print("Game 10 Winner: " + Game10['overall_winner'])
winner = Game10['overall_winner']
win_points.append(winner)

Game11 = simulate_matchessvc('Sale Sharks', 'Worcester Warriors', n_matches=1000)
print("Game 11 Winner: " + Game11['overall_winner'])
winner = Game11['overall_winner']
win_points.append(winner)

"""Round3"""

Game11 = simulate_matchessvc('Gloucester Rugby', 'Bristol Bears', n_matches=1000)
print("Game 11 Winner: " + Game11['overall_winner'])
winner = Game11['overall_winner']
win_points.append(winner)

Game12 = simulate_matchessvc('Exeter Chiefs', 'Sale Sharks', n_matches=1000)
print("Game 12 Winner: " + Game12['overall_winner'])
winner = Game12['overall_winner']
win_points.append(winner)

Game13 = simulate_matchessvc('Harlequins', 'Bath Rugby', n_matches=1000)
print("Game 13 Winner: " + Game13['overall_winner'])
winner = Game13['overall_winner']
win_points.append(winner)

Game14 = simulate_matchessvc('Northampton Saints', 'Saracens', n_matches=1000)
print("Game 14 Winner: " + Game14['overall_winner'])
winner = Game14['overall_winner']
win_points.append(winner)

Game15 = simulate_matchessvc('Worcester Warriors', 'Newcastle Falcons', n_matches=1000)
print("Game 15 Winner: " + Game15['overall_winner'])
winner = Game15['overall_winner']
win_points.append(winner)

Game15 = simulate_matchessvc('Wasps', 'Leicester Tigers', n_matches=1000)
print("Game 15 Winner: " + Game15['overall_winner'])
winner = Game15['overall_winner']
win_points.append(winner)

"""Round4"""

Game16 = simulate_matchessvc('Bath Rugby', 'Northampton Saints', n_matches=1000)
print("Game 16 Winner: " + Game16['overall_winner'])
winner = Game16['overall_winner']
win_points.append(winner)

Game17 = simulate_matchessvc('Bristol Bears', 'Harlequins', n_matches=1000)
print("Game 17 Winner: " + Game17['overall_winner'])
winner = Game17['overall_winner']
win_points.append(winner)

Game18 = simulate_matchessvc('Sale Sharks', 'Wasps', n_matches=1000)
print("Game 18 Winner: " + Game18['overall_winner'])
winner = Game18['overall_winner']
win_points.append(winner)

Game19 = simulate_matchessvc('Leicester Tigers', 'Worcester Warriors', n_matches=1000)
print("Game 19 Winner: " + Game19['overall_winner'])
winner = Game19['overall_winner']
win_points.append(winner)

Game20 = simulate_matchessvc('Saracens', 'Gloucester Rugby', n_matches=1000)
print("Game 20 Winner: " + Game20['overall_winner'])
winner = Game20['overall_winner']
win_points.append(winner)

"""Round5"""

Game21 = simulate_matchessvc('Newcastle Falcons', 'Wasps', n_matches=1000)
print("Game 21 Winner: " + Game21['overall_winner'])
winner = Game21['overall_winner']
win_points.append(winner)

Game22 = simulate_matchessvc('Bristol Bears', 'Northampton Saints', n_matches=1000)
print("Game 22 Winner: " + Game22['overall_winner'])
winner = Game22['overall_winner']
win_points.append(winner)

Game23 = simulate_matchessvc('Exeter Chiefs', 'Worcester Warriors', n_matches=1000)
print("Game 23 Winner: " + Game23['overall_winner'])
winner = Game23['overall_winner']
win_points.append(winner)

Game24 = simulate_matchessvc('Gloucester Rugby', 'Harlequins', n_matches=1000)
print("Game 24 Winner: " + Game24['overall_winner'])
winner = Game24['overall_winner']
win_points.append(winner)

Game25 = simulate_matchessvc('Saracens', 'Bath Rugby', n_matches=1000)
print("Game 25 Winner: " + Game25['overall_winner'])
winner = Game25['overall_winner']
win_points.append(winner)

Game24 = simulate_matchessvc('Leicester Tigers', 'Sale Sharks', n_matches=1000)
print("Game 25 Winner: " + Game25['overall_winner'])
winner = Game25['overall_winner']
win_points.append(winner)

"""Round 6"""

Game25 = simulate_matchessvc('Bath Rugby', 'Exeter Chiefs', n_matches=1000)
print("Game 25 Winner: " + Game25['overall_winner'])
winner = Game25['overall_winner']
win_points.append(winner)

Game26 = simulate_matchessvc('Northampton Saints', 'Leicester Tigers', n_matches=1000)
print("Game 26 Winner: " + Game26['overall_winner'])
winner = Game26['overall_winner']
win_points.append(winner)

Game27 = simulate_matchessvc('Sale Sharks', 'Newcastle Falcons', n_matches=1000)
print("Game 27 Winner: " + Game27['overall_winner'])
winner = Game27['overall_winner']
win_points.append(winner)

Game28 = simulate_matchessvc('Wasps', 'Gloucester Rugby', n_matches=1000)
print("Game 28 Winner: " + Game28['overall_winner'])
winner = Game28['overall_winner']
win_points.append(winner)

Game29 = simulate_matchessvc('Harlequins', 'Saracens', n_matches=1000)
print("Game 29 Winner: " + Game29['overall_winner'])
winner = Game29['overall_winner']
win_points.append(winner)

Game30 = simulate_matchessvc('Worcester Warriors', 'Bristol Bears', n_matches=1000)
print("Game 30 Winner: " + Game30['overall_winner'])
winner = Game30['overall_winner']
win_points.append(winner)

"""Round 7"""

Game31 = simulate_matchessvc('Gloucester Rugby', 'Leicester Tigers', n_matches=1000)
print("Game 31 Winner: " + Game31['overall_winner'])
winner = Game31['overall_winner']
win_points.append(winner)

Game32 = simulate_matchessvc('Harlequins', 'Newcastle Falcons', n_matches=1000)
print("Game 32 Winner: " + Game32['overall_winner'])
winner = Game32['overall_winner']
win_points.append(winner)

Game33 = simulate_matchessvc('Bath Rugby', 'Worcester Warriors', n_matches=1000)
print("Game 33 Winner: " + Game33['overall_winner'])
winner = Game33['overall_winner']
win_points.append(winner)

Game34 = simulate_matchessvc('Northampton Saints', 'Wasps', n_matches=1000)
print("Game 34 Winner: " + Game34['overall_winner'])
winner = Game34['overall_winner']
win_points.append(winner)

Game35 = simulate_matchessvc('Saracens', 'Sale Sharks', n_matches=1000)
print("Game 35 Winner: " + Game35['overall_winner'])
winner = Game35['overall_winner']
win_points.append(winner)

Game36 = simulate_matchessvc('Bristol Bears', 'Exeter Chiefs', n_matches=1000)
print("Game 36 Winner: " + Game36['overall_winner'])
winner = Game36['overall_winner']
win_points.append(winner)

"""Round 8"""

Game37 = simulate_matchessvc('Gloucester Rugby', 'Leicester Tigers', n_matches=1000)
print("Game 37 Winner: " + Game37['overall_winner'])
winner = Game37['overall_winner']
win_points.append(winner)

Game38 = simulate_matchessvc('Harlequins', 'Newcastle Falcons', n_matches=1000)
print("Game 38 Winner: " + Game38['overall_winner'])
winner = Game38['overall_winner']
win_points.append(winner)

Game39 = simulate_matchessvc('Bath Rugby', 'Worcester Warriors', n_matches=1000)
print("Game 39 Winner: " + Game39['overall_winner'])
winner = Game39['overall_winner']
win_points.append(winner)

Game40 = simulate_matchessvc('Northampton Saints', 'Wasps', n_matches=1000)
print("Game 40 Winner: " + Game40['overall_winner'])
winner = Game40['overall_winner']
win_points.append(winner)

Game41 = simulate_matchessvc('Saracens', 'Sale Sharks', n_matches=1000)
print("Game 41 Winner: " + Game41['overall_winner'])
winner = Game41['overall_winner']
win_points.append(winner)

Game42 = simulate_matchessvc('Bristol Bears', 'Exeter Chiefs', n_matches=1000)
print("Game 42 Winner: " + Game42['overall_winner'])
winner = Game42['overall_winner']
win_points.append(winner)

"""Round 9"""

Game43 = simulate_matchessvc('Newcastle Falcons', 'Bath Rugby', n_matches=1000)
print("Game 43 Winner: " + Game43['overall_winner'])
winner = Game43['overall_winner']
win_points.append(winner)

Game44 = simulate_matchessvc('Worcester Warriors', 'Harlequins', n_matches=1000)
print("Game 44 Winner: " + Game44['overall_winner'])
winner = Game44['overall_winner']
win_points.append(winner)

Game45 = simulate_matchessvc('Exeter Chiefs', 'Gloucester Rugby', n_matches=1000)
print("Game 45 Winner: " + Game45['overall_winner'])
winner = Game45['overall_winner']
win_points.append(winner)

Game46 = simulate_matchessvc('Sale Sharks', 'Northampton Saints', n_matches=1000)
print("Game 46 Winner: " + Game46['overall_winner'])
winner = Game46['overall_winner']
win_points.append(winner)

Game47 = simulate_matchessvc('Wasps', 'Bristol Bears', n_matches=1000)
print("Game 47 Winner: " + Game47['overall_winner'])
winner = Game47['overall_winner']
win_points.append(winner)

Game48 = simulate_matchessvc('Leicester Tigers', 'Saracens', n_matches=1000)
print("Game 48 Winner: " + Game48['overall_winner'])
winner = Game48['overall_winner']
win_points.append(winner)

"""Round 10"""

Game49 = simulate_matchessvc('Harlequins', 'Exeter Chiefs', n_matches=1000)
print("Game 49 Winner: " + Game49['overall_winner'])
winner = Game49['overall_winner']
win_points.append(winner)

Game50 = simulate_matchessvc('Bristol Bears', 'Leicester Tigers', n_matches=1000)
print("Game 50 Winner: " + Game50['overall_winner'])
winner = Game50['overall_winner']
win_points.append(winner)

Game51 = simulate_matchessvc('Gloucester Rugby', 'Worcester Warriors', n_matches=1000)
print("Game 51 Winner: " + Game51['overall_winner'])
winner = Game51['overall_winner']
win_points.append(winner)

Game52 = simulate_matchessvc('Northampton Saints', 'Newcastle Falcons', n_matches=1000)
print("Game 52 Winner: " + Game52['overall_winner'])
winner = Game52['overall_winner']
win_points.append(winner)

Game53 = simulate_matchessvc('Saracens', 'Wasps', n_matches=1000)
print("Game 53 Winner: " + Game53['overall_winner'])
winner = Game53['overall_winner']
win_points.append(winner)

Game54 = simulate_matchessvc('Worcester Warriors', 'Northampton Saints', n_matches=1000)
print("Game 54 Winner: " + Game54['overall_winner'])
winner = Game54['overall_winner']
win_points.append(winner)

"""Round 11"""

Game55 = simulate_matchessvc('Exeter Chiefs', 'Saracens', n_matches=1000)
print("Game 55 Winner: " + Game55['overall_winner'])
winner = Game55['overall_winner']
win_points.append(winner)

Game56 = simulate_matchessvc('Leicester Tigers', 'Harlequins', n_matches=1000)
print("Game 56 Winner: " + Game56['overall_winner'])
winner = Game56['overall_winner']
win_points.append(winner)

Game57 = simulate_matchessvc('Sale Sharks', 'Bristol Bears', n_matches=1000)
print("Game 57 Winner: " + Game57['overall_winner'])
winner = Game57['overall_winner']
win_points.append(winner)

Game58 = simulate_matchessvc('Newcastle Falcons', 'Gloucester Rugby', n_matches=1000)
print("Game 58 Winner: " + Game58['overall_winner'])
winner = Game58['overall_winner']
win_points.append(winner)

Game59 = simulate_matchessvc('Wasps', 'Bath Rugby', n_matches=1000)
print("Game 59 Winner: " + Game59['overall_winner'])
winner = Game59['overall_winner']
win_points.append(winner)

"""Round 12"""

Game60 = simulate_matchessvc('Northampton Saints', 'Exeter Chiefs', n_matches=1000)
print("Game 60 Winner: " + Game60['overall_winner'])
winner = Game60['overall_winner']
win_points.append(winner)

Game61 = simulate_matchessvc('Gloucester Rugby', 'Sale Sharks', n_matches=1000)
print("Game 61 Winner: " + Game61['overall_winner'])
winner = Game61['overall_winner']
win_points.append(winner)

Game62 = simulate_matchessvc('Saracens', 'Worcester Warriors', n_matches=1000)
print("Game 62 Winner: " + Game62['overall_winner'])
winner = Game62['overall_winner']
win_points.append(winner)

Game63 = simulate_matchessvc('Harlequins', 'Wasps', n_matches=1000)
print("Game 63 Winner: " + Game63['overall_winner'])
winner = Game63['overall_winner']
win_points.append(winner)

Game64 = simulate_matchessvc('Bath Rugby', 'Leicester Tigers', n_matches=1000)
print("Game 64 Winner: " + Game64['overall_winner'])
winner = Game64['overall_winner']
win_points.append(winner)

Game65 = simulate_matchessvc('Bristol Bears', 'Newcastle Falcons', n_matches=1000)
print("Game 65 Winner: " + Game65['overall_winner'])
winner = Game65['overall_winner']
win_points.append(winner)

"""Round 13"""

Game66 = simulate_matchessvc('Sale Sharks', 'Saracens', n_matches=1000)
print("Game 66 Winner: " + Game66['overall_winner'])
winner = Game66['overall_winner']
win_points.append(winner)

Game67 = simulate_matchessvc('Exeter Chiefs', 'Bristol Bears', n_matches=1000)
print("Game 67 Winner: " + Game67['overall_winner'])
winner = Game67['overall_winner']
win_points.append(winner)

Game67 = simulate_matchessvc('Leicester Tigers', 'Gloucester Rugby', n_matches=1000)
print("Game 67 Winner: " + Game67['overall_winner'])
winner = Game67['overall_winner']
win_points.append(winner)

Game68 = simulate_matchessvc('Newcastle Falcons', 'Harlequins', n_matches=1000)
print("Game 68 Winner: " + Game68['overall_winner'])
winner = Game68['overall_winner']
win_points.append(winner)

Game68 = simulate_matchessvc('Worcester Warriors', 'Bath Rugby', n_matches=1000)
print("Game 68 Winner: " + Game68['overall_winner'])
winner = Game68['overall_winner']
win_points.append(winner)

Game69 = simulate_matchessvc('Wasps', 'Northampton Saints', n_matches=1000)
print("Game 69 Winner: " + Game69['overall_winner'])
winner = Game69['overall_winner']
win_points.append(winner)

"""Round 14"""

Game70 = simulate_matchessvc('Bristol Bears', 'Wasps', n_matches=1000)
print("Game 70 Winner: " + Game70['overall_winner'])
winner = Game70['overall_winner']
win_points.append(winner)

Game71 = simulate_matchessvc('Gloucester Rugby', 'Exeter Chiefs', n_matches=1000)
print("Game 71 Winner: " + Game71['overall_winner'])
winner = Game71['overall_winner']
win_points.append(winner)

Game72 = simulate_matchessvc('Northampton Saints', 'Sale Sharks', n_matches=1000)
print("Game 72 Winner: " + Game72['overall_winner'])
winner = Game72['overall_winner']
win_points.append(winner)

Game73 = simulate_matchessvc('Bath Rugby', 'Newcastle Falcons', n_matches=1000)
print("Game 73 Winner: " + Game73['overall_winner'])
winner = Game73['overall_winner']
win_points.append(winner)

Game74 = simulate_matchessvc('Harlequins', 'Worcester Warriors', n_matches=1000)
print("Game 74 Winner: " + Game74['overall_winner'])
winner = Game74['overall_winner']
win_points.append(winner)

Game75 = simulate_matchessvc('Saracens', 'Leicester Tigers', n_matches=1000)
print("Game 75 Winner: " + Game75['overall_winner'])
winner = Game75['overall_winner']
win_points.append(winner)

"""Round 15"""

Game76 = simulate_matchessvc('Gloucester Rugby', 'Saracens', n_matches=1000)
print("Game 76 Winner: " + Game76['overall_winner'])
winner = Game76['overall_winner']
win_points.append(winner)

Game77 = simulate_matchessvc('Harlequins', 'Bristol Bears', n_matches=1000)
print("Game 77 Winner: " + Game77['overall_winner'])
winner = Game77['overall_winner']
win_points.append(winner)

Game78 = simulate_matchessvc('Wasps', 'Sale Sharks', n_matches=1000)
print("Game 78 Winner: " + Game78['overall_winner'])
winner = Game78['overall_winner']
win_points.append(winner)

Game79 = simulate_matchessvc('Exeter Chiefs', 'Newcastle Falcons', n_matches=1000)
print("Game 79 Winner: " + Game79['overall_winner'])
winner = Game79['overall_winner']
win_points.append(winner)

Game80 = simulate_matchessvc('Northampton Saints', 'Bath Rugby', n_matches=1000)
print("Game 80 Winner: " + Game80['overall_winner'])
winner = Game80['overall_winner']
win_points.append(winner)

Game81 = simulate_matchessvc('Worcester Warriors', 'Leicester Tigers', n_matches=1000)
print("Game 81 Winner: " + Game81['overall_winner'])
winner = Game81['overall_winner']
win_points.append(winner)

"""Round 16"""

Game83 = simulate_matchessvc('Bath Rugby', 'Harlequins', n_matches=1000)
print("Game 83 Winner: " + Game83['overall_winner'])
winner = Game83['overall_winner']
win_points.append(winner)

Game84 = simulate_matchessvc('Leicester Tigers', 'Wasps', n_matches=1000)
print("Game 84 Winner: " + Game84['overall_winner'])
winner = Game84['overall_winner']
win_points.append(winner)

Game85 = simulate_matchessvc('Sale Sharks', 'Exeter Chiefs', n_matches=1000)
print("Game 85 Winner: " + Game85['overall_winner'])
winner = Game85['overall_winner']
win_points.append(winner)

Game86 = simulate_matchessvc('Saracens', 'Northampton Saints', n_matches=1000)
print("Game 86 Winner: " + Game86['overall_winner'])
winner = Game86['overall_winner']
win_points.append(winner)

Game87 = simulate_matchessvc('Newcastle Falcons', 'Worcester Warriors', n_matches=1000)
print("Game 87 Winner: " + Game87['overall_winner'])
winner = Game87['overall_winner']
win_points.append(winner)

"""Round 17"""

Game88 = simulate_matchessvc('Bath Rugby', 'Saracens', n_matches=1000)
print("Game 88 Winner: " + Game88['overall_winner'])
winner = Game88['overall_winner']
win_points.append(winner)

Game89 = simulate_matchessvc('Sale Sharks', 'Leicester Tigers', n_matches=1000)
print("Game 89 Winner: " + Game89['overall_winner'])
winner = Game89['overall_winner']
win_points.append(winner)

Game90 = simulate_matchessvc('Wasps', 'Newcastle Falcons', n_matches=1000)
print("Game 90 Winner: " + Game90['overall_winner'])
winner = Game90['overall_winner']
win_points.append(winner)

Game91 = simulate_matchessvc('Northampton Saints', 'Bristol Bears', n_matches=1000)
print("Game 91 Winner: " + Game91['overall_winner'])
winner = Game91['overall_winner']
win_points.append(winner)

Game92 = simulate_matchessvc('Worcester Warriors', 'Exeter Chiefs', n_matches=1000)
print("Game 92 Winner: " + Game92['overall_winner'])
winner = Game92['overall_winner']
win_points.append(winner)

Game93 = simulate_matchessvc('Harlequins', 'Gloucester Rugby', n_matches=1000)
print("Game 93 Winner: " + Game93['overall_winner'])
winner = Game93['overall_winner']
win_points.append(winner)

"""Round 18"""

Game94 = simulate_matchessvc('Leicester Tigers', 'Northampton Saints', n_matches=1000)
print("Game 94 Winner: " + Game94['overall_winner'])
winner = Game94['overall_winner']
win_points.append(winner)

Game95 = simulate_matchessvc('Bristol Bears', 'Worcester Warriors', n_matches=1000)
print("Game 95 Winner: " + Game95['overall_winner'])
winner = Game95['overall_winner']
win_points.append(winner)

Game96 = simulate_matchessvc('Gloucester Rugby', 'Wasps', n_matches=1000)
print("Game 96 Winner: " + Game96['overall_winner'])
winner = Game96['overall_winner']
win_points.append(winner)

Game97 = simulate_matchessvc('Saracens', 'Harlequins', n_matches=1000)
print("Game 97 Winner: " + Game97['overall_winner'])
winner = Game97['overall_winner']
win_points.append(winner)

Game98 = simulate_matchessvc('Newcastle Falcons', 'Sale Sharks', n_matches=1000)
print("Game 98 Winner: " + Game98['overall_winner'])
winner = Game98['overall_winner']
win_points.append(winner)


Game100 = simulate_matchessvc('Exeter Chiefs', 'Bath Rugby', n_matches=1000)
print("Game 100 Winner: " + Game100['overall_winner'])
winner = Game100['overall_winner']
win_points.append(winner)

"""Round 19"""

Game101 = simulate_matchessvc('Sale Sharks', 'Harlequins', n_matches=1000)
print("Game 101 Winner: " + Game101['overall_winner'])
winner = Game101['overall_winner']
win_points.append(winner)

Game103 = simulate_matchessvc('Bath Rugby', 'Bristol Bears', n_matches=1000)
print("Game 103 Winner: " + Game103['overall_winner'])
winner = Game103['overall_winner']
win_points.append(winner)

Game104 = simulate_matchessvc('Saracens', 'Newcastle Falcons', n_matches=1000)
print("Game 104 Winner: " + Game104['overall_winner'])
winner = Game104['overall_winner']
win_points.append(winner)

Game105 = simulate_matchessvc('Wasps', 'Worcester Warriors', n_matches=1000)
print("Game 105 Winner: " + Game105['overall_winner'])
winner = Game105['overall_winner']
win_points.append(winner)

Game106 = simulate_matchessvc('Leicester Tigers', 'Exeter Chiefs', n_matches=1000)
print("Game 106 Winner: " + Game106['overall_winner'])
winner = Game106['overall_winner']
win_points.append(winner)

Game107 = simulate_matchessvc('Northampton Saints', 'Gloucester Rugby', n_matches=1000)
print("Game 107 Winner: " + Game107['overall_winner'])
winner = Game107['overall_winner']
win_points.append(winner)

"""Round 20"""

Game108 = simulate_matchessvc('Newcastle Falcons', 'Leicester Tigers', n_matches=1000)
print("Game 108 Winner: " + Game108['overall_winner'])
winner = Game108['overall_winner']
win_points.append(winner)

Game109 = simulate_matchessvc('Gloucester Rugby', 'Bath Rugby', n_matches=1000)
print("Game 109 Winner: " + Game109['overall_winner'])
winner = Game109['overall_winner']
win_points.append(winner)

Game110 = simulate_matchessvc('Harlequins', 'Northampton Saints', n_matches=1000)
print("Game 110 Winner: " + Game110['overall_winner'])
winner = Game110['overall_winner']
win_points.append(winner)

Game111 = simulate_matchessvc('Worcester Warriors', 'Sale Sharks', n_matches=1000)
print("Game 111 Winner: " + Game111['overall_winner'])
winner = Game111['overall_winner']
win_points.append(winner)

Game112 = simulate_matchessvc('Bristol Bears', 'Saracens', n_matches=1000)
print("Game 112 Winner: " + Game112['overall_winner'])
winner = Game112['overall_winner']
win_points.append(winner)

Game113 = simulate_matchessvc('Exeter Chiefs', 'Wasps', n_matches=1000)
print("Game 113 Winner: " + Game113['overall_winner'])
winner = Game113['overall_winner']
win_points.append(winner)

"""Round 21"""

Game114 = simulate_matchessvc('Newcastle Falcons', 'Northampton Saints', n_matches=1000)
print("Game 114 Winner: " + Game114['overall_winner'])
winner = Game114['overall_winner']
win_points.append(winner)

Game115 = simulate_matchessvc('Sale Sharks', 'Bath Rugby', n_matches=1000)
print("Game 115 Winner: " + Game115['overall_winner'])
winner = Game115['overall_winner']
win_points.append(winner)

Game116 = simulate_matchessvc('Exeter Chiefs', 'Harlequins', n_matches=1000)
print("Game 116 Winner: " + Game116['overall_winner'])
winner = Game116['overall_winner']
win_points.append(winner)

Game117 = simulate_matchessvc('Leicester Tigers', 'Bristol Bears', n_matches=1000)
print("Game 117 Winner: " + Game117['overall_winner'])
winner = Game117['overall_winner']
win_points.append(winner)

Game118 = simulate_matchessvc('Wasps', 'Saracens', n_matches=1000)
print("Game 118 Winner: " + Game118['overall_winner'])
winner = Game118['overall_winner']
win_points.append(winner)

Game119 = simulate_matchessvc('Worcester Warriors', 'Gloucester Rugby', n_matches=1000)
print("Game 119 Winner: " + Game119['overall_winner'])
winner = Game119['overall_winner']
win_points.append(winner)

"""Round 22"""

Game120 = simulate_matchessvc('Harlequins', 'Leicester Tigers', n_matches=1000)
print("Game 120 Winner: " + Game120['overall_winner'])
winner = Game120['overall_winner']
win_points.append(winner)

Game121 = simulate_matchessvc('Gloucester Rugby', 'Newcastle Falcons', n_matches=1000)
print("Game 121 Winner: " + Game121['overall_winner'])
winner = Game121['overall_winner']
win_points.append(winner)

Game122 = simulate_matchessvc('Northampton Saints', 'Worcester Warriors', n_matches=1000)
print("Game 122 Winner: " + Game122['overall_winner'])
winner = Game122['overall_winner']
win_points.append(winner)

Game123 = simulate_matchessvc('Saracens', 'Exeter Chiefs', n_matches=1000)
print("Game 123 Winner: " + Game123['overall_winner'])
winner = Game123['overall_winner']
win_points.append(winner)

Game124 = simulate_matchessvc('Bath Rugby', 'Wasps', n_matches=1000)
print("Game 124 Winner: " + Game124['overall_winner'])
winner = Game124['overall_winner']
win_points.append(winner)

"""Round 23"""

Game125 = simulate_matchessvc('Exeter Chiefs', 'Northampton Saints', n_matches=1000)
print("Game 125 Winner: " + Game125['overall_winner'])
winner = Game125['overall_winner']
win_points.append(winner)

Game126 = simulate_matchessvc('Leicester Tigers', 'Bath Rugby', n_matches=1000)
print("Game 126 Winner: " + Game126['overall_winner'])
winner = Game126['overall_winner']
win_points.append(winner)

Game127 = simulate_matchessvc('Newcastle Falcons', 'Bristol Bears', n_matches=1000)
print("Game 127 Winner: " + Game127['overall_winner'])
winner = Game127['overall_winner']
win_points.append(winner)

Game128 = simulate_matchessvc('Sale Sharks', 'Gloucester Rugby', n_matches=1000)
print("Game 128 Winner: " + Game128['overall_winner'])
winner = Game128['overall_winner']
win_points.append(winner)

Game129 = simulate_matchessvc('Wasps', 'Harlequins', n_matches=1000)
print("Game 129 Winner: " + Game129['overall_winner'])
winner = Game129['overall_winner']
win_points.append(winner)

Game130 = simulate_matchessvc('Worcester Warriors', 'Saracens', n_matches=1000)
print("Game 130 Winner: " + Game130['overall_winner'])
winner = Game130['overall_winner']
win_points.append(winner)

print(win_points)

from collections import Counter

final_points = Counter(win_points)


df = pd.DataFrame.from_dict(final_points, orient='index').reset_index()
df = df.rename(columns={'index':'Team', 0:'Points'})
df['Points'] = df['Points'].apply(lambda x: x*4)
df = df.sort_values(["Points"], ascending=False)
df

"""Semi-final"""

semi1 = simulate_matchessvc('Saracens', 'Northampton Saints', n_matches=1)
print("semi1 Winner: " + semi1['overall_winner'])



semi2 = simulate_matchessvc('Exeter Chiefs', 'Gloucester Rugby', n_matches=1)
print("semi2 Winner: " + semi2['overall_winner'])

"""Final and winner"""

final = simulate_matchessvc('Saracens', 'Exeter Chiefs', n_matches=1)
print("Winner of the League: " + final['overall_winner'])